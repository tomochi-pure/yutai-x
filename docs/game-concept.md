# 株主優待クロスゲーム 修正版完全仕様書

## 🔧 開発方針・制約事項
- **開発者スキル**: コーディング初心者（HTML/CSS/JS基礎知識のみ、コピペレベル）
- **進行方式**: 小さなステップを積み重ねて段階的に実装
- **役割分担**: 要件・指示→開発者、コード作成・技術実装→AI
- **技術選択**: 単一HTML統合型（初心者に最適・配布簡易）
- **命名規則**: 大文字英語禁止（例：development-status.md）
- **ファイル配置**: ドキュメントはyutai-x-docs/ディレクトリ（非公開）
- **β版画面構成**: タイトル画面 → メインゲーム画面（CSS切り替え）
- **認証**: β版はローカルストレージ、将来Firebase実装予定
- **開発環境**: Visual Studio Code + Live Server
- **ホスティング**: Firebase Hosting（即座反映・本格運用）
- **公開URL**: https://yutai-x.web.app

## 🎮 基本コンセプト
- **ゲーム名**：優待クロスは、やらない方がいい
- **ジャンル**：放置系クリッカーゲーム + 資金管理
- **ターゲット**：Twitter優待クロス界隈（約100名）+ 一般ユーザー
- **プレイ時間**：1回1分程度 × 1日複数回ログイン
- **ゲーム目標**：自己資金を増やして億万長者を目指す
- **対応端末**：スマホ専用（PCでも動作可能だが保証・想定外）

## 🎯 ゲーム概要
証券アプリ風UIで「注文内容を確認」ボタンを連打し、確保した在庫を獲得。獲得した在庫をガチャ装填→発火して優待券をゲット、売却して自己資金を増やしていく放置系ゲーム。基本はbot君による自動化で、プレイヤーは進捗確認とアップグレードがメイン。

## 📱 画面構成（β版実装済み）

### タイトル画面
- ゲームタイトル表示：「優待クロスは、やらない方がいい」
- 3段階入力フォーム（バージョン・ユーザーID・名前）
- 名前フィールド有効/無効切り替え機能（📝/🔒）
- ゲーム開始ボタン（メインゲームへ遷移）
- マシュマロリンク（🩷開発者に愛を届ける🩷）
- 情報タブシステム（お知らせ・ランキング）
- note埋め込み機能
- ログインボーナス: 資金20万円/日（0時リセット）

### メインゲーム画面
- **ヘッダー（2:3比率）**: 名前・ID | 現金残高・プレミアムコイン
- **5タブ構成**: 株注文・bot改造・ミッション・実績・設定
- **タブ別完全切り替えシステム**

#### 株注文タブ（実装完了）
- サーバーHPバー
- 中央エリア（注文内容を確認ボタン）
- 信用建て余力バー（6段階色分け -500%対応）
- 下部タブ（BOT調整・注文約定一覧 1:3比率）
- ステータス表示（注文件数・建玉金額・信用建て余力・現引きボタン 4:1比率）
- パフォーマンス指標（⚡🎯🚛🔥）
- デバッグボタンエリア

#### ミッションタブ（基本実装完了）
- **Twitter風タイムライン**: 身内ネタ・界隈ミッション表示
- **外部JSONファイル管理**: missions.json
- **🔄更新ボタン**: ミッションリフレッシュ
- **エラーハンドリング**: JSONファイル読み込み失敗対応

## 💰 資金・リスク管理システム

### 基本資産構造
- **保有資産（現金）**：1,000万円（初期値）
- **新規建可能額**：保有資産の300% = 3,000万円
- **在庫価値**：30万円固定（β版）
- **保有上限計算**：新規建可能額 ÷ 30万円

### 横転リスクシステム
**確保率と全ロストリスク**：
- **0-50%**：リスク0%（安全圏）
- **50-100%**：リスク0%（まだ安全）
- **100-150%**：リスク10%（要注意）
- **150-200%**：リスク20%（要注意）
- **200-250%**：リスク40%（高リスク）
- **250-300%**：リスク60%（高リスク）
- **300%**：新規建て不可（上限）

### 戦略的要素
- **最適解**：100%付近での運用（合理的プレイ）
- **ハイリスク**：250-300%での豪運チャレンジ
- **判断要素**：ガチャ装填タイミング、アップグレード投資vs安全確保

## ⚙️ β版実装機能

### 🎮 メイン画面レイアウト（実装済み）
```
    [サーバーHP（緑→グレー）目盛り付き]
    
    【注文内容を確認】（緑色・メインボタン・中央）
    
[信用建て余力：100%（6段階色分けバー）]

[BOT調整(1)] [注文約定一覧(3)]

注文件数　　265件  |  信用建て余力　100%  | [現引き] |
建玉金額　　　　　　　　　　　　　0円 |         |        |
```

### 📊 信用建て余力バー仕様（実装済み）
**6段階色分け（-500%対応）**：
- **+100% ～ 0%**：水色バー（安全）
- **0% ～ -100%**：黄色バー（注意）
- **-100% ～ -200%**：オレンジバー（警告）
- **-200% ～ -300%**：赤色バー（危険）
- **-300% ～ -400%**：濃赤色バー（激危険）
- **-400% ～ -500%**：黒色バー（破滅）

**計算式**: `現金残高 × 3.3 - 建玉金額`
**ラベル表示**: 「信用建て余力：-150%」

### 🔘 ボタンシステム詳細

**注文内容を確認ボタン（緑色・メイン）**：
- ユーザー・bot君が連打するメインボタン
- 効果：サーバーダメージ確定 + 低確率で在庫獲得
- 位置：画面中央

**現引きボタン（黄色→赤色変化）**：
- 位置：注文約定一覧タブの右側（4:1比率）
- 初期状態：「現引き」（黄色）
- ガチャ装填：白/銀/虹バーが金色に変化、ボタンが「現渡し」（赤色）に変更
- ガチャ発火：「現渡し」押下で金色バー消失、水色に復帰

## 🎯 ミッションシステム仕様（実装中）

### 基本構造
- **Twitter風タイムライン**: 身内ネタ・界隈ミッション
- **外部ファイル管理**: missions.json
- **キャラクター表現**: 絵文字アイコン（例：🤤👍）

### JSONファイル構造
```json
{
  "missions": [
    {
      "id": "m001",
      "character": {
        "name": "じゅるりかぶ",
        "handle": "@juru",
        "icon": "🤤👍"
      },
      "content": "油そば食べ過ぎて死亡確認\n助けて優待クロス界隈",
      "timestamp": "1時間",
      "stats": {
        "replies": 3,
        "retweets": 1,
        "likes": 156
      },
      "mission": {
        "reward": "プレミアムコイン 50枚",
        "materials": "なし",
        "description": "界隈の危機を救出せよ！"
      }
    }
  ]
}
```

### 実装予定機能
- **クリック詳細展開**: カードクリック → 詳細表示/非表示
- **進行バーシステム**: 右上に水色→緑色進行バー
- **5秒自動完了**: デバッグ用高速達成
- **報酬受取ポップアップ**: 完了時の報酬表示
- **10種類ミッション**: ランダム3選択システム
- **CSV→JSON変換ツール**: 簡単なミッション追加フロー

### アイテムシステム（3種類）

**💰 通貨系アイテム（資産並列管理）**：
- **お米**：kg単位、資産10,000,000円と同等価値で管理
- **プレミアムコイン**：枚数単位、資産10,000,000円と同等価値で管理

**🎫 優待券カテゴリ**：
- **QUOカード**：6種類の額面 × 枚数管理
  - **S**：10,000円（最高レア）
  - **A**：5,000円（高レア）  
  - **B**：3,000円（中レア）
  - **B**：2,000円（中レア）
  - **C**：1,000円（低レア）
  - **C**：500円（低レア）

### ガチャシステム詳細

**ガチャ装填（現引きフェーズ）**：
- 保有在庫をガチャに装填
- bot君自動クリック停止
- 手動クリック受付停止
- HPバー演出：白/銀/虹→金色変化
- ボタン表記変更：「現引き」（黄色）→「現渡し」（赤色）

**ガチャ発火（現渡しフェーズ）**：
- 装填済みガチャの一括発火
- サーバーHP回復処理
- アイテム抽選・排出
- HPバー復帰：金色→水色ベース
- ボタン表記復帰：「現渡し」→「現引き」
- bot・手動クリック再開
- **ガチャ結果表示のみ**（売却は別タブ）

### 基本システム仕様
- **在庫獲得確率**：10%（基本値）
- **bot君初期性能**：1秒に1回クリック
- **サーバー初期HP**：100,000クリック分
- **サーバーHP回復**：秒間10,000クリック分
- **オフライン計算**：最大10日間

### 放置・自動化機能
- **優待クロスbot君**：自動クリック機能（10段階アップグレード、β版はLv4まで）
- **オフライン進行**：ログアウト中も進行
- **復帰アラート**：「○時間の間に××回クリック」「××個取得」表示

### 特殊システム
- **サーバーダウン**：HP枯渇時の爆発演出、全在庫消失
- **謝罪ボタン**：サーバーダウン時「注文内容を確認」ボタンが「謝罪する」に変更、連打で回復
- **警告書**：サーバーダウン時に配布されるデメリットアイテム（効果未定）

## 🖥️ UI設計

### タブ構成（5タブ実装済み）
1. **株注文タブ**：ゲームプレイ画面（完全実装）
2. **bot改造タブ**：bot君強化（準備中）
3. **ミッションタブ**：Twitter風タイムライン（基本実装完了）
4. **実績タブ**：（準備中）
5. **設定タブ**：セーブ・ロード等（準備中）

### ユーザー体験設計
**1回のセッション（1分程度）**：
1. アプリを開く
2. オフライン進行結果確認
3. 溜まった在庫をガチャ装填→発火
4. ガチャ結果確認
5. ミッションタブで身内ネタ確認・受注
6. 売却タブで優待券売却、資金増加確認
7. bot君アップグレード検討
8. アプリを閉じる

**放置時間の進行レンジ**：
- **序盤**：1-2時間で満タン（頻繁ログイン）
- **中盤**：4-6時間で満タン（1日2-3回）
- **終盤**：8-12時間で満タン（朝晩チェック）

## 🚀 完全版への展望

### 基本拡張機能
- **ストーリー機能**：サーバーダウン後の展開
- **優待券100種類**：「食事優待券」「カフェ優待券」等の多様なアイテム
- **実績システム**：サーバーダウン回数等の記録

### 💾 セーブデータ連携（Firebase）
- **1日1回セーブ**：データの安全性確保
- **ログインボーナス演出**：セーブ確認画面でボーナス受け取り
- **ユーザー体験**：「今日もデータ保存完了！」+ 報酬獲得の一石二鳥

### 🎯 ミッション機能
**基本システム**：
- **実行時間**：2-8時間の多様なミッション（5秒デバッグ対応）
- **複数起動促進**：スタミナ的なユーザー体験
- **アイテム報酬**：多種多様なアイテム配布

**ミッション種類**：
- **身内ネタミッション**：「じゅるりかぶの油そば危機」「優待マスターの爆死救済」
- **繰り返しミッション**：日常的な収益システム
- **ストーリーミッション**：一回限り、ストーリー進行必須
- **実績ミッション**：一回限り、特別な解除条件

### 📊 ミッション管理システム
- **CSV→JSON変換ツール**：簡単なミッション追加
- **10種類ミッション準備**：ランダム3選択
- **タイムリー更新**：身内ネタの即座反映
- **界隈キャラクター**：絵文字アイコンでの表現

## 🔧 実装ロードマップ（更新版）

### 完了済み (11/13ステップ)
1. ✅ **基本UI構築**（HTML/CSS統合型）
2. ✅ **タイトル画面システム**（3段階フォーム・情報タブ）
3. ✅ **メインゲーム画面UI**（5タブ・比率調整完了）
4. ✅ **画面レスポンシブ対応**（PC/スマホ）
5. ✅ **ナビゲーション**（完全タブ切り替え）
6. ✅ **データ管理システム**（ローカルストレージ）
7. ✅ **情報表示システム**（ランキング・note埋め込み）
8. ✅ **UI/UX調整**（証券アプリ風デザイン統一）
9. ✅ **タブシステム構築**（きれいな切り替え実装）
10. ✅ **ミッションタブ基本機能**（Twitter風UI・JSON管理）
11. ✅ **Firebase Hosting移行**（即座反映・本格運用）

### 実装中 (0/13ステップ)
現在実装中の項目はありません

### 未実装 (2/13ステップ)
12. ⏳ **ミッション詳細機能**（クリック展開・進行バー・報酬）
13. ⏳ **ミッション拡張機能**（10種類・ランダム選択・変換ツール）

## 🎨 UI・演出方針
- **証券アプリ風デザイン**：リアルな証券会社アプリに似せたUI
- **段階的気づき設計**：「あれ？HP減ってる？」→「楽しい！」→「倒せそう？」→「サーバーダウン」
- **圧迫感演出**：6段階色分けバーで危険性を視覚化
- **爽快感演出**：ガチャ装填時の静止→発火、色変化アニメーション
- **界隈ネタ散りばめ**：Twitter優待クロス界隈のインサイダーネタ
- **Twitter風UI**：身内ネタが活きる親しみやすいデザイン

## 💾 技術仕様（Firebase移行版）
- **保存方式**：ローカルストレージ（β版）、Firebase（完全版予定）
- **対応環境**：スマートフォンブラウザ
- **外部ライブラリ**：なし（HTML5/CSS3/JavaScript標準のみ）
- **開発環境**：Visual Studio Code + Live Server
- **ホスティング**：Firebase Hosting（即座反映・高速配信）
- **データ管理**：外部JSONファイル（missions.json）
- **公開URL**：https://yutai-x.web.app
- **管理コンソール**：https://console.firebase.google.com/project/yutai-x

### ファイル構成（Firebase移行後）
```
デスクトップ/
├── 📁 yutai-x/              ← ゲーム本体（公開）
│   ├── 📄 index.html        （統合型・メインファイル）
│   ├── 📄 missions.json     （ミッションデータ）
│   ├── 📄 firebase.json     （Firebase設定）
│   ├── 📄 .firebaserc       （プロジェクト設定）
│   └── 📄 .gitignore        （Git管理用）
└── 📁 yutai-x-docs/         ← 開発資料（非公開）
    ├── 📄 game-concept.md
    └── 📄 development-status.md
```

## 🔥 Firebase機能活用予定

### 現在活用中
- **Firebase Hosting**：静的ファイル配信・即座反映
- **Google Analytics**：アクセス解析・ユーザー行動分析

### 将来実装予定
- **Firestore**：クラウドセーブ・リアルタイムランキング
- **Firebase Authentication**：ユーザー管理・匿名認証
- **Cloud Functions**：サーバーレス処理・定期処理
- **Firebase Cloud Messaging**：プッシュ通知

### 開発ワークフロー（確立済み）
```bash
# ローカル開発
code index.html  # VS Codeで編集

# デプロイ（即座反映）
firebase deploy --only hosting

# 確認
# https://yutai-x.web.app で瞬時確認
```

## 🏷️ 用語統一
- **確保した在庫**：プレイヤー向け表示名
- **zaiko**：開発時変数名
- **注文内容を確認**：メインクリックボタン名
- **現引き**：ガチャ装填ボタン名
- **現渡し**：ガチャ発火ボタン名
- **信用建て余力**：リスク管理バー名
- **じゅるりかぶ🤤👍**：初期ミッションキャラクター

## 🌐 運用・管理

### サイト管理
- **公開URL**：https://yutai-x.web.app
- **管理画面**：Firebase Console
- **アクセス解析**：Google Analytics
- **稼働監視**：Firebase Hosting 99.95% SLA

### セキュリティ
- **HTTPS完全対応**：SSL/TLS暗号化
- **機密情報保護**：仕様書・開発メモ非公開化
- **アクセス制御**：公開ファイルの厳密管理

### パフォーマンス
- **CDN配信**：世界規模での高速配信
- **キャッシュ最適化**：静的ファイルの効率配信
- **モバイル最適化**：スマホ専用設計

## 📊 想定運用規模
- **月間アクセス**：100人程度（Twitter優待クロス界隈）
- **Firebase無料枠**：転送量10GB/月（十分に余裕）
- **ストレージ使用量**：1MB未満（画像なし・テキストベース）
- **コスト**：完全無料運用可能

---
**開発方針**：まずは動くものを作る → バランス調整 → 演出強化 → β版リリース → フィードバック収集 → 完全版開発

**現在の進捗**：92%完了（ミッション詳細機能実装で完成）  
**公開環境**：https://yutai-x.web.app （Firebase Hosting）  
**次回目標**：ミッション詳細機能実装によるβ版完成
